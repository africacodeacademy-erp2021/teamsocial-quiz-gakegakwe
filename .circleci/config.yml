version: 2.1

workflows:
  version: 2
  build-test-and-deploy:
   jobs:
    - test 
    - build:
        requires:
         - test
      

jobs:
 test:
  docker:
    - image: cimg/node:14.17.3
  steps:
    - checkout
    - run:
        name: install dependencies 
        command: npm install
   
    - run:
        name: tests
        command: npm run test

 build:
  docker:
    - image: cimg/node:14.17.3
  steps:
    - checkout
    - run:
        name: install react-router-dom 
        command: npm install --save react-router-dom

    - run:
        name: save-dev @types/react-router-dom    
        command: npm i --save-dev @types/react-router-dom 
        
    - run:
        name: install dependencies
        command: npm install
    - run:
        name: build
        command: npm run build
